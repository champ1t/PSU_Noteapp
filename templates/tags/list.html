{% extends "base.html" %}

{% block content %}
<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h1>All Tags</h1>
        <a href="{{ url_for('index') }}" class="btn btn-secondary">Back to Notes</a>
    </div>

    <!-- ฟอร์มเพิ่มแท็กรวดเร็ว -->
    <div class="card mb-4">
        <div class="card-body">
            <h5 class="card-title">Add New Tag</h5>
            <form method="POST" action="{{ url_for('tag_add') }}">
                {{ form.hidden_tag() }}
                <div class="input-group">
                    {{ form.name(class="form-control", placeholder="Enter tag name") }}
                    <button type="submit" class="btn btn-success">+ Add Tag</button>
                </div>
            </form>
        </div>
    </div>

    <!-- รายการแท็ก -->
    {% if tags %}
    <div class="list-group">
        {% for tag in tags %}
        <div class="list-group-item d-flex justify-content-between align-items-center">
            <div>
                <span class="badge bg-primary rounded-pill me-2">
                    {{ tag.notes_count() }} notes
                </span>
                {{ tag.name }}
            </div>
            <div>
                <a href="{{ url_for('tag_edit', tag_id=tag.id) }}" 
                   class="btn btn-sm btn-outline-primary me-1">Edit</a>
                <form method="POST" action="{{ url_for('tag_delete', tag_id=tag.id) }}" 
                      style="display:inline;">
                    <button type="submit" class="btn btn-sm btn-outline-danger"
                            onclick="return confirm('Delete this tag?')">
                        Delete
                    </button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="alert alert-info">No tags yet. Add your first tag above!</div>
    {% endif %}
</div>
{% endblock %}